# 灯SCORE - 成長を灯すスコア TODO

## Phase 1: デザインシステムとデータベース設計
- [x] カラーパレット（#FFB46E, #5CA7FF, #F4F6F8）とフォント（Noto Sans JP, Poppins）を設定
- [x] Tailwind CSSのテーマカスタマイズ
- [x] データベーススキーマ設計（users, categories, evaluations）
- [x] 評価カテゴリのマスターデータ作成

## Phase 2: ログインと自己評価機能
- [x] 温かみのあるログイン画面デザイン
- [x] 自己評価入力画面（灯を増やす体験）
- [x] 評価保存機能（バックエンド）
- [x] 「灯がふわっと増える」アニメーション実装

## Phase 3: 評価結果表示機能
- [x] 放射状レーダーチャートの実装
- [x] 自己評価と上長評価の比較表示
- [x] 「あなたの灯」スコア表示
- [x] 成長の可視化（光のアニメーション）

## Phase 4: 上長評価機能
- [ ] 対象ユーザー選択UI
- [ ] 上長評価入力画面
- [ ] 評価保存と通知機能

## Phase 5: 管理機能
- [ ] ユーザー管理画面（シンプル・余白重視）
- [ ] 評価カテゴリ管理
- [ ] 評価履歴一覧

## Phase 6: アニメーションとインタラクション
- [ ] 評価入力時のアニメーション強化
- [ ] スコア変化のトランジション
- [ ] ホバーエフェクトとマイクロインタラクション
- [ ] レスポンシブデザイン最適化

## Phase 7: デプロイと最終調整
- [ ] 動作確認とバグ修正
- [ ] パフォーマンス最適化
- [ ] チェックポイント作成
- [ ] ユーザーへの提供

## 既存システムの反映

- [x] 評価カテゴリを3つ（基本スキル25項目、マインド10項目、テクニカルスキル10項目）に更新
- [x] 5段階評価（5:期待を120%超える、4:期待通り、3:基本的、2:改善が必要、1:指導中）を実装
- [x] 各評価項目の詳細説明（5段階それぞれの基準）をデータベースに追加
- [x] 評価保存機能の実装（自己評価と上長評価）
- [ ] 評価結果表示機能の実装（レーダーチャート、差分表示）
- [ ] 上長評価機能の実装（ユーザー選択、評価入力）
- [ ] 管理機能の実装（ユーザー管理、評価履歴）

## Phase 8: 上長評価機能と評価履歴（新規追加）
- [x] 上長評価用のユーザー選択画面
- [x] 上長評価入力画面（45項目の評価）
- [x] 温かいフィードバックメッセージ機能
- [x] 評価履歴一覧ページ（時系列表示）
- [x] 成長推移グラフ（折れ線グラフ）
- [x] 評価期間フィルター機能

## Phase 9: 評価項目と評価基準の修正（緊急）
- [x] 既存GASシステムのデータファイルを確認
- [x] 評価項目を正確に45項目（BS:25, M:10, T:10）に修正
- [x] 評価基準をS～D（5～1）の詳細説明に修正
- [x] データベースに正確なデータを再投入
- [x] UIに評価基準の詳細説明を表示
- [x] 動作確認とテスト

## Phase 10: UI評価基準ラベルの修正
- [x] 自己評価入力ページのラベルを削除
- [x] 上長評価入力ページのラベルを削除
- [x] 評価結果ページのラベルを削除
- [x] データベースの正確な説明のみを表示

## Phase 11: 評価基準説明文の修正
- [x] 正しい評価基準データ（pasted_content_8.txt/9.txt）を確認
- [x] データベースの評価基準説明文を更新
- [x] ダイアログ表示の動作確認

## Phase 12: 評価基準ダイアログの統合とスマホ最適化
- [x] 上長評価入力ページに評価基準ダイアログを追加
- [x] 評価結果ページに評価基準詳細を表示
- [x] スマホ最適化（レスポンシブデザイン）
- [x] 動作確認とテスト

## Phase 13: スマホでの「基準を見る」ボタン表示問題の修正
- [x] 自己評価入力ページのボタンレイアウトを修正
- [x] 上長評価入力ページのボタンレイアウトを修正
- [x] スマホでの表示確認
- [x] 動作テスト

## Phase 14: ID+PASSログインと権限管理システムの実装
- [x] データベーススキーマの修正（roleにmanager追加、username/passwordHash追加）
- [x] bcryptパッケージのインストール
- [x] 認証API（ログイン・ログアウト）の実装
- [x] ログイン画面の実装
- [x] 管理者・上長によるアカウント発行機能の実装
  - [x] ユーザー管理画面の作成
  - [x] アカウント作成APIの実装
  - [x] 初期パスワード生成機能
- [x] 権限管理システムの実装（閲覧制限・評価制限）
  - [x] admin/manager/userロールの権限定義
  - [x] 評価結果閲覧の権限チェック
  - [x] 評価実施の権限チェック
- [x] パスワード変更機能の実装
  - [x] パスワード変更APIの実装
  - [x] パスワード変更画面の作成
- [x] 動作確認とテスト

## Phase 15: 評価結果の差分可視化機能
- [x] レーダーチャートでの差分強調表示（±2点以上を赤、±1点を黄色）
- [x] 認識一致度スコアの算出と表示
- [x] 差分ランキング表TOP5（自己評価が高い/低い項目を分けて表示）
- [x] 視覚的な差分表示（矢印アイコン、展開可能な詳細ビュー）
- [x] 上長コメントの表示
- [x] スマホ最適化
- [x] 動作確認とテスト

## Phase 16: 評価期間を半期単位に変更（2025年度から）
- [x] 評価期間のロジックを半期単位に変更（上期：4～9月、下期：10～3月）
- [x] 評価期間の表示を「YYYY年度上期/下期」形式に変更
- [x] 自己評価入力画面の期間表示を更新
- [x] 上長評価入力画面の期間表示を更新
- [x] 評価結果画面の期間表示を更新
- [x] 評価履歴画面を半期単位に対応
- [x] 2025年7月と2026年1月をスタート時期として設定
- [x] 動作確認とテスト

## Phase 17: 評価期間を6月末決算に合わせて修正
- [x] 上期を7月～12月に変更
- [x] 下期を1月～6月に変更
- [x] periodUtils.tsのロジックを修正
- [x] 動作確認とテスト

## Phase 18: 自己評価時のスコア表示を削除
- [x] 自己評価入力画面からスコア表示を削除
- [x] スコアは上長評価完了後のみ表示するように変更
- [x] 動作確認とテスト

## Phase 19: 評価期間選択機能の実装
- [x] 期間選択ドロップダウンコンポーネントを作成
- [x] 自己評価画面に期間選択機能を追加
- [x] 上長評価画面に期間選択機能を追加
- [x] 選択した期間の評価データを読み込み
- [x] 選択した期間に評価データを保存
- [x] 動作確認とテスト

## Phase 20: 自社ロゴをUIに組み込み
- [x] ロゴファイルをpublicディレクトリに配置
- [x] const.tsのAPP_LOGOを更新
- [x] ヘッダーのロゴを更新
- [x] ダッシュボードのロゴを更新
- [x] 動作確認とテスト

## Phase 21: 評価期間の一括比較機能
- [x] 比較画面のUIを設計
- [x] 複数期間の評価データを取得するAPIを実装
- [x] 期間ごとのスコア推移グラフを実装
- [x] カテゴリ別の成長推移を表示
- [ ] 動作確認とテスト

## Phase 22: 評価期間のステータス表示
- [x] 評価完了状況の定義（未入力・入力済み・承認済み）
- [x] 期間選択ドロップダウンにステータスアイコンを追加
- [x] 評価履歴画面にステータスを表示
- [ ] 動作確認とテスト

## Phase 23: 評価期間のロック機能
- [x] 評価ロック状態をデータベースに追加
- [x] ロックされた期間の編集を防止
- [ ] 管理者がロック/アンロックできる機能を追加
- [ ] ロック状態のUI表示を追加
- [ ] 動作確認とテスト

## Phase 24: 「灯SCORE」にルビを追加
- [x] DashboardLayoutのタイトルにルビを追加
- [x] ヘッダーのタイトルにルビを追加
- [x] その他の画面のタイトルにルビを追加
- [x] 動作確認とテスト

## Phase 25: 英語表記を「Akarabi SCORE」に修正
- [x] Home.tsxの「Akari SCORE」を「Akarabi SCORE」に修正
- [x] Dashboard.tsxの「Akari SCORE」を「Akarabi SCORE」に修正
- [x] その他の画面の英語表記を確認・修正
- [x] 動作確認とテスト

## Phase 26: Home.tsxの電球マークをロゴに変更
- [x] ヘッダーの電球マークをPLACE LIBREロゴに変更
- [x] ヒーローセクションの電球マークをPLACE LIBREロゴに変更
- [x] 動作確認とテスト

## Phase 27: メールアドレス欄の削除とユーザー情報編集機能
- [x] データベーススキーマからemailカラムを削除
- [x] ユーザー管理画面からメールアドレス欄を削除
- [x] ユーザー情報編集ダイアログを作成
- [x] ユーザー情報更新APIを実装
- [x] 名前・ユーザー名・権限の変更機能を実装
- [ ] 動作確認とテスト

## Phase 28: 各画面に戻るボタンを追加
- [x] ユーザー管理画面に戻るボタンを追加
- [x] 評価履歴画面に戻るボタンを追加（既に存在）
- [x] 比較画面に戻るボタンを追加（既に存在）
- [x] パスワード変更画面に戻るボタンを追加
- [ ] 動作確認とテスト

## Phase 29: ログイン画面に「灯が灯る」アニメーションを追加
- [x] 背景を暗めのグラデーション（夜明け前）に変更
- [x] ログイン成功時に画面が明るくなるアニメーションを追加
- [x] 光の粒（パーティクル）が浮かび上がるアニメーションを追加
- [x] 「あなたの成長を灯します」のメッセージを追加
- [x] PLACE LIBREロゴに光るエフェクトを追加
- [ ] 動作確認とテスト

## Phase 30: ID+PASSログイン機能を実装
- [x] /loginルートをApp.tsxに追加
- [x] 管理者アカウント（ID+PASS）をデータベースに作成
- [x] ログアウト時に/loginにリダイレクト
- [x] 未認証時に/loginにリダイレクト
- [x] SDK認証ロジックにJWT認証を追加
- [x] 動作確認とテスト

## Phase 31: ログアウト後の画面遷移問題を修正
- [x] ログアウト処理の調査（ブラウザ履歴の問題）
- [x] リダイレクト処理の修正（window.location.replaceを使用）
- [x] 動作確認とテスト

## Phase 32: MVV（経営理念）閲覧機能の実装
- [x] MVVページのデザイン設計
- [x] MVVページのUI実装（ミッション・ビジョン・バリュー）
- [x] ダッシュボードにMVVカードを追加
- [x] ルーティング設定
- [x] 動作確認とテスト

## Phase 33: MVVページのレイアウト修正とReact DOMエラー修正
- [x] MVVページのテキスト表示問題を修正
- [x] React DOMエラーの原因調査
- [x] アニメーションコンポーネントの修正
- [x] 会社名の表記修正（プレイス・リーブル）
- [ ] MVVページのスクロールアニメーションを復元
- [ ] React DOMエラーを回避しながらアニメーション実装
- [ ] 動作確認とテスト

## Phase 34: React DOMエラー（insertOrAppendPlacementNode）の修正
- [ ] ログイン後のReact DOMエラーの原因特定
- [ ] Dashboard.tsxとその関連コンポーネントの修正
- [ ] エラーを引き起こしているコンポーネントの特定
- [ ] React 19の厳格なレンダリングルールに準拠
- [ ] 動作確認とテスト

## Phase 35: 公開環境でID/パスワードログインを有効化
- [x] Home.tsxに/loginへのリンクを追加
- [x] 公開環境でログインページにアクセスできることを確認
- [x] 動作確認とチェックポイント保存

## Phase 36: スマホ最適化の最終チェック
- [x] 全画面のスマホ表示を確認（ブラウザのモバイルビュー）
- [x] ログイン画面のスマホ最適化（既に対応済み）
- [x] ダッシュボードのスマホ最適化（ログアウトボタン、カードグリッド）
- [x] 自己評価入力画面のスマホ最適化（既に対応済み）
- [x] 上長評価入力画面のスマホ最適化（既に対応済み）
- [x] 評価結果画面のスマホ最適化（レーダーチャートの高さ調整）
- [x] 評価履歴画面のスマホ最適化（既に対応済み）
- [x] ユーザー管理画面のスマホ最適化（テーブル横スクロール対応済み）
- [x] MVVページのスマホ最適化（ヘッダー、タイトルサイズ）
- [x] Homeページのボタンをスマホで全幅表示
- [x] 動作確認とチェックポイント保存

## Phase 37: 半期分の個人ロードマップ機能
- [x] データベーススキーマ設計（roadmaps, roadmapSteps, roadmapGoals）
- [x] テーブル作成（SQLで直接実行）
- [x] バックエンドAPI実装（作成、取得、更新、削除）
- [x] ロードマップ作成・編集画面のUI実装
- [x] 長期ビジョン入力フォーム
- [x] STEP追加・削除機能
- [x] 定量目標追加・削除・チェック機能
- [x] ロードマップ閲覧画面の実装（読み取り専用、こだわりUI）
- [x] 上長がメンバーのロードマップを閲覧できる機能
- [x] メンバーロードマップ一覧画面の実装
- [x] ダッシュボードにメンバーロードマップカードを追加
- [x] ダッシュボードにロードマップカードを追加
- [x] スマホ最適化（縦スクロール形式）
- [x] 動作確認とチェックポイント保存

## Phase 38: Dashboard.tsxのMapPinインポートエラー修正
- [x] Dashboard.tsxにMapPinアイコンのインポートを追加
- [x] 動作確認

## Phase 39: Manus OAuth（Googleアカウントログイン）の削除
- [x] HomeページからGoogleアカウントログインボタンを削除
- [x] 不要なインポートを削除
- [x] 動作確認とテスト
- [x] チェックポイント保存

## Phase 40: マイキャリアマップを横並びレイアウトに変更
- [x] ロードマップ閲覧画面（MemberRoadmapView.tsx）を横並びレイアウトに変更
- [x] ロードマップ編集画面（Roadmap.tsx）を横並びレイアウトに変更
- [x] 横スクロール対応（長期ビジョン → STEP1 → STEP2 → STEP3）
- [x] スマホ対応（横スクロール）
- [x] 動作確認とチェックポイント保存

## Phase 41: マイキャリアマップのレイアウト変更（上段：STEP、下段：長期ビジョン）
- [x] MemberRoadmapView.tsxのレイアウトを変更（上段：STEP1-3、下段：長期ビジョン）
- [x] Roadmap.tsxのレイアウトを変更（上段：STEP1-3、下段：長期ビジョン）
- [x] UIをこだわって実装（グラデーション、影、アニメーション）
- [x] 動作確認とチェックポイント保存

## Phase 42: 「最近の活動」機能の実装
- [x] データベーススキーマ設計（activity_logsテーブル）
- [x] テーブル作成（SQL）
- [x] バックエンドAPI実装（活動ログの記録と取得）
- [x] 自己評価提出時に活動ログを記録
- [x] 上長評価完了時に活動ログを記録
- [x] ロードマップ更新時に活動ログを記録
- [x] ダッシュボードに活動履歴を表示
- [x] 動作確認とチェックポイント保存

## Phase 43: MVVページのMISSION文言を修正
- [x] MVV.tsxのMISSIONセクションの文言を新しい内容に更新
- [x] 動作確認とチェックポイント保存

## Phase 44: activityLogsクエリエラーの修正
- [x] activityLogsテーブルのカラム名を確認
- [x] Drizzleスキーマとデータベースの一致を確認
- [x] クエリエラーを修正（targetUserIdカラムを追加）
- [x] 動作確認とチェックポイント保存

## Phase 45: 公開環境のログイン問題を修正
- [x] Home.tsxの認証ロジックを確認
- [x] Management UIで公開設定を確認
- [x] トップページを/loginにリダイレクトするように修正
- [x] 動作確認とチェックポイント保存

## Phase 46: 管理者用マニュアルとメンバー用マニュアルを作成
- [x] 管理者用マニュアルを作成（看護師向け、直感的で分かりやすい内容）
- [x] メンバー用マニュアルを作成（看護師向け、直感的で分かりやすい内容）
- [x] マニュアルをユーザーに提供

## Phase 47: マニュアルをスライド形式で作成
- [x] 管理者用スライドのコンテンツを作成
- [ ] 管理者用スライドを生成（16ページ、画像なしのシンプルデザイン）
- [ ] 管理者用スライドをブラウザで確認（内容が見えるかチェック）
- [ ] 管理者用スライドをPDF化
- [ ] メンバー用スライドのコンテンツを作成
- [ ] メンバー用スライドを生成（画像なしのシンプルデザイン）
- [ ] メンバー用スライドをブラウザで確認（内容が見えるかチェック）
- [ ] メンバー用スライドをPDF化
- [ ] スライドとPDFをユーザーに提供

## Phase 48: デモユーザーの作成
- [x] デモユーザー（ユーザー名：demo-user、パスワード：AkariDemo2024!）を作成
- [x] デモユーザーの権限を設定（一般ユーザー）
- [x] デモユーザー用のサンプルデータを作成
  - [x] 自己評価データ（2025年度上期・下期、2024年度下期）
  - [x] 上長評価データ（2025年度上期・下期、2024年度下期）
  - [x] マイキャリアマップ（長期ビジョン + STEP1-3 + 定量目標）
  - [x] 活動ログ（評価提出、ロードマップ更新など）
- [x] 動作確認とチェックポイント保存

## Phase 49: 期間比較ページのスコア表示問題を修正
- [x] 期間比較ページのデータ取得ロジックを調査
- [x] スコアが0になる原因を特定（evaluationScoresテーブルからデータを取得する必要があった）
- [x] フロントエンドのデータ取得処理を修正（getEvaluationDetailsを使用）
- [x] カテゴリ別のスコア計算ロジックを追加
- [x] デモデータの再投入
- [x] レスポンス構造の修正（detail.evaluation.evaluationPeriod → detail.evaluationPeriod）
- [x] 動作確認とテスト
- [x] チェックポイント保存
